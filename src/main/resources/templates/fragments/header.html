<header th:fragment="header">
  <nav class="shadow-md text-lg bg-amber-300">
    <div class="hidden md:flex items-center justify-between">
      <a href="/"
        ><img
          th:src="@{/img/logo.webp}"
          alt="Logo Pčelarstvo Pavlović"
          class="w-20 ml-8"
      /></a>
      <div class="p-8">
        <ul class="flex items-center gap-8" x-data="{ cart: false }">
          <li class="hover:underline underline-offset-8">
            <a href="/">Naslovna</a>
          </li>
          <li class="hover:underline underline-offset-8">
            <a href="/proizvodi">Proizvodi</a>
          </li>
          <li class="hover:underline underline-offset-8">
            <a href="/o-nama">O nama</a>
          </li>
          <li class="hover:underline underline-offset-8">
            <a href="/kontakt">Kontakt</a>
          </li>
          <li class="ml-16 relative">
            <div>
              <svg
                @click="cart = !cart"
                xmlns="http://www.w3.org/2000/svg"
                class="w-6 h-6 hover:cursor-pointer"
                viewBox="0 0 24 24"
              >
                <path
                  fill="currentColor"
                  d="M7 22q-.825 0-1.412-.587T5 20q0-.825.588-1.412T7 18q.825 0 1.413.588T9 20q0 .825-.587 1.413T7 22m10 0q-.825 0-1.412-.587T15 20q0-.825.588-1.412T17 18q.825 0 1.413.588T19 20q0 .825-.587 1.413T17 22M6.15 6l2.4 5h7l2.75-5zM5.2 4h14.75q.575 0 .875.513t.025 1.037l-3.55 6.4q-.275.5-.737.775T15.55 13H8.1L7 15h12v2H7q-1.125 0-1.7-.987t-.05-1.963L6.6 11.6L3 4H1V2h3.25zm3.35 7h7z"
                />
              </svg>

              <div
                x-show="cart"
                class="absolute right-0 p-4 mt-2 bg-white dark:bg-neutral-900 rounded-md shadow-xl w-96 z-20"
                x-cloak
              >
                <h2 class="text-base font-semibold">Moja košarica</h2>
                <hr class="mt-3" />
                <div th:if="${cart.size() > 0}">
                  <div
                    th:each="item : ${cart}"
                    class="text-base py-4 gap-2 flex justify-between"
                  >
                    <div class="flex gap-2">
                      <img
                        th:if="${item.product != null}"
                        th:src="@{'/img/' + ${item.product.image}}"
                        alt=""
                        class="w-16"
                      />

                      <p th:text="|${item.quantity}x ${item.product.name}|"></p>
                    </div>
                    <div class="flex gap-2">
                      <p
                        th:text="${item.product.price * item.quantity + ' €'}"
                      ></p>
                      <form th:action="@{/kosarica/izbrisi}" method="post">
                        <input
                          type="hidden"
                          name="productId"
                          th:value="${item.product.id}"
                        />
                        <button
                          type="submit"
                          class="bg-transparent border-none"
                        >
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1.5"
                            stroke="currentColor"
                            class="w-5 h-5"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"
                            />
                          </svg>
                        </button>
                      </form>
                    </div>
                  </div>
                  <hr class="mb-3" />
                  <div class="flex items-center justify-between">
                    <p class="text-base font-semibold">Ukupno</p>
                    <p
                      th:text="${totalCartPrice + ' €'}"
                      class="font-semibold"
                    ></p>
                  </div>
                  <form action="/kosarica/kupnja" method="get">
                    <button class="button text-base w-full mt-2">
                      Idi na plaćanje
                    </button>
                  </form>
                </div>
                <p th:unless="${cart.size() > 0}" class="text-base pt-4">
                  Vaša košarica je prazna
                </p>
              </div>
            </div>
          </li>
          <li>
            <a
              id="theme-toggle1"
              href="javascript:void(0)"
              aria-label="Toggle dark/light theme"
              ><svg
                id="theme-toggle-light-icon1"
                xmlns="http://www.w3.org/2000/svg"
                class="hidden w-6 h-6"
                viewBox="0 0 256 256"
              >
                <path
                  fill="currentColor"
                  d="M236.37 139.4a12 12 0 0 0-12-3A84.07 84.07 0 0 1 119.6 31.59a12 12 0 0 0-15-15a108.86 108.86 0 0 0-54.91 38.48A108 108 0 0 0 136 228a107.09 107.09 0 0 0 64.93-21.69a108.86 108.86 0 0 0 38.44-54.94a12 12 0 0 0-3-11.97Zm-49.88 47.74A84 84 0 0 1 68.86 69.51a84.93 84.93 0 0 1 23.41-21.22Q92 52.13 92 56a108.12 108.12 0 0 0 108 108q3.87 0 7.71-.27a84.79 84.79 0 0 1-21.22 23.41Z"
                />
              </svg>
              <svg
                id="theme-toggle-dark-icon1"
                xmlns="http://www.w3.org/2000/svg"
                class="hidden w-6 h-6"
                viewBox="0 0 256 256"
              >
                <path
                  fill="currentColor"
                  d="M116 32V16a12 12 0 0 1 24 0v16a12 12 0 0 1-24 0Zm80 96a68 68 0 1 1-68-68a68.07 68.07 0 0 1 68 68Zm-24 0a44 44 0 1 0-44 44a44.05 44.05 0 0 0 44-44ZM51.51 68.49a12 12 0 1 0 17-17l-12-12a12 12 0 0 0-17 17Zm0 119l-12 12a12 12 0 0 0 17 17l12-12a12 12 0 1 0-17-17ZM196 72a12 12 0 0 0 8.49-3.51l12-12a12 12 0 0 0-17-17l-12 12A12 12 0 0 0 196 72Zm8.49 115.51a12 12 0 0 0-17 17l12 12a12 12 0 0 0 17-17ZM44 128a12 12 0 0 0-12-12H16a12 12 0 0 0 0 24h16a12 12 0 0 0 12-12Zm84 84a12 12 0 0 0-12 12v16a12 12 0 0 0 24 0v-16a12 12 0 0 0-12-12Zm112-96h-16a12 12 0 0 0 0 24h16a12 12 0 0 0 0-24Z"
                />
              </svg>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div
      x-data="{ isOpen: false }"
      class="md:hidden flex items-center justify-between relative bg-amber-300"
      x-cloak
    >
      <a href="/"
        ><img
          th:src="@{/img/logo.webp}"
          alt="Logo Pčelarstvo Pavlović"
          class="w-16 ml-2"
      /></a>
      <div class="flex items-center gap-4" x-data="{ cart: false }">
        <div class="ml-16 relative">
          <svg
            @click="cart = !cart"
            xmlns="http://www.w3.org/2000/svg"
            class="w-6 h-6 hover:cursor-pointer"
            viewBox="0 0 24 24"
          >
            <path
              fill="currentColor"
              d="M7 22q-.825 0-1.412-.587T5 20q0-.825.588-1.412T7 18q.825 0 1.413.588T9 20q0 .825-.587 1.413T7 22m10 0q-.825 0-1.412-.587T15 20q0-.825.588-1.412T17 18q.825 0 1.413.588T19 20q0 .825-.587 1.413T17 22M6.15 6l2.4 5h7l2.75-5zM5.2 4h14.75q.575 0 .875.513t.025 1.037l-3.55 6.4q-.275.5-.737.775T15.55 13H8.1L7 15h12v2H7q-1.125 0-1.7-.987t-.05-1.963L6.6 11.6L3 4H1V2h3.25zm3.35 7h7z"
            />
          </svg>

          <div
            x-show="cart"
            class="absolute right-0 p-4 mt-2 bg-white dark:bg-neutral-900 rounded-md shadow-xl w-[22rem] z-20"
            x-cloak
          >
            <h2 class="text-base font-semibold">Moja košarica</h2>
            <hr class="mt-3" />
            <div th:if="${cart.size() > 0}">
              <div
                th:each="item : ${cart}"
                class="text-base py-4 gap-2 flex justify-between"
              >
                <div class="flex gap-2">
                  <img
                    th:if="${item.product != null}"
                    th:src="@{'/img/' + ${item.product.image}}"
                    alt=""
                    class="w-16"
                  />

                  <p th:text="|${item.quantity}x ${item.product.name}|"></p>
                </div>
                <div class="flex gap-2">
                  <p th:text="${item.product.price * item.quantity + ' €'}"></p>
                  <form th:action="@{/kosarica/izbrisi}" method="post">
                    <input
                      type="hidden"
                      name="productId"
                      th:value="${item.product.id}"
                    />
                    <button type="submit" class="bg-transparent border-none">
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        stroke-width="1.5"
                        stroke="currentColor"
                        class="w-5 h-5"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"
                        />
                      </svg>
                    </button>
                  </form>
                </div>
              </div>
              <hr class="mb-3" />
              <div class="flex items-center justify-between">
                <p class="text-base font-semibold">Ukupno</p>
                <p th:text="${totalCartPrice + ' €'}" class="font-semibold"></p>
              </div>
              <form action="/kosarica/kupnja" method="get">
                <button class="button text-base w-full mt-2">
                  Idi na plaćanje
                </button>
              </form>
            </div>
            <p th:unless="${cart.size() > 0}" class="text-base pt-4">
              Vaša košarica je prazna
            </p>
          </div>
        </div>

        <button
          @click="isOpen = !isOpen"
          type="button"
          class="inline-flex items-center justify-center p-2 mr-2 w-10 h-10"
          :aria-expanded="isOpen ? 'true' : 'false'"
        >
          <span class="sr-only">Navigacijska traka</span>
          <template x-if="!isOpen">
            <svg
              class="w-5 h-5"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 17 14"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="1.5"
                d="M1 1h15M1 7h15M1 13h15"
              />
            </svg>
          </template>
        </button>
      </div>

      <div
        x-show="isOpen"
        @click.away="isOpen = false"
        class="fixed inset-0 w-full h-full bg-amber-300 bg-opacity-50 z-50"
      >
        <div class="w-full h-full bg-amber-300">
          <a href="/"
            ><img
              th:src="@{/img/logo.webp}"
              alt="Logo Pčelarstvo Pavlović"
              class="w-16 ml-2"
          /></a>
          <button
            @click="isOpen = false"
            class="absolute top-0 right-0 p-2 m-2 focus:outline-none focus:ring"
          >
            <svg
              class="w-6 h-6"
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
            >
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"
              />
            </svg>
          </button>
          <ul class="mt-6 text-xl">
            <li>
              <a
                href="/"
                class="block p-4 font-medium rounded hover:font-semibold"
                >Naslovna</a
              >
            </li>
            <li>
              <a
                href="/proizvodi"
                class="block p-4 font-medium rounded hover:font-semibold"
                >Proizvodi</a
              >
            </li>
            <li>
              <a
                href="/o-nama"
                class="block p-4 font-medium rounded hover:font-semibold"
                >O nama</a
              >
            </li>
            <li>
              <a
                href="/kontakt"
                class="block p-4 font-medium rounded hover:font-semibold"
                >Kontakt</a
              >
            </li>

            <hr class="my-6 border-black mx-4" />

            <div
              class="flex items-center gap-6 absolute bottom-5 right-1/2 translate-x-1/2"
            >
              <a href="https://www.facebook.com" target="_blank">
                <svg
                  class="w-6 h-6"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="currentColor"
                  viewBox="0 0 8 19"
                >
                  <path
                    fill-rule="evenodd"
                    d="M6.135 3H8V0H6.135a4.147 4.147 0 0 0-4.142 4.142V6H0v3h2v9.938h3V9h2.021l.592-3H5V3.591A.6.6 0 0 1 5.592 3h.543Z"
                    clip-rule="evenodd"
                  />
                </svg>
                <span class="sr-only">Facebook profil</span>
              </a>
              <a href="https://www.instagram.com" target="_blank">
                <svg
                  class="w-6 h-6"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                >
                  <path
                    fill="currentColor"
                    d="M13.028 2.001a78.82 78.82 0 0 1 2.189.022l.194.007c.224.008.445.018.712.03c1.064.05 1.79.218 2.427.465c.66.254 1.216.598 1.772 1.154a4.908 4.908 0 0 1 1.153 1.771c.247.637.415 1.364.465 2.428c.012.266.022.488.03.712l.006.194a79 79 0 0 1 .023 2.188l.001.746v1.31a78.836 78.836 0 0 1-.023 2.189l-.006.194c-.008.224-.018.445-.03.712c-.05 1.064-.22 1.79-.466 2.427a4.884 4.884 0 0 1-1.153 1.772a4.915 4.915 0 0 1-1.772 1.153c-.637.247-1.363.415-2.427.465c-.267.012-.488.022-.712.03l-.194.006a79 79 0 0 1-2.189.023l-.746.001h-1.309a78.836 78.836 0 0 1-2.189-.023l-.194-.006a60.64 60.64 0 0 1-.712-.03c-1.064-.05-1.79-.22-2.428-.466a4.89 4.89 0 0 1-1.771-1.153a4.904 4.904 0 0 1-1.154-1.772c-.247-.637-.415-1.363-.465-2.427a74.367 74.367 0 0 1-.03-.712l-.005-.194A79.053 79.053 0 0 1 2 13.028v-2.056a78.82 78.82 0 0 1 .022-2.188l.007-.194c.008-.224.018-.446.03-.712c.05-1.065.218-1.79.465-2.428A4.88 4.88 0 0 1 3.68 3.68a4.897 4.897 0 0 1 1.77-1.155c.638-.247 1.363-.415 2.428-.465l.712-.03l.194-.005A79.053 79.053 0 0 1 10.972 2h2.056Zm-1.028 5A5 5 0 1 0 12 17a5 5 0 0 0 0-10Zm0 2A3 3 0 1 1 12.001 15a3 3 0 0 1 0-6Zm5.25-3.5a1.25 1.25 0 0 0 0 2.498a1.25 1.25 0 0 0 0-2.5Z"
                  />
                </svg>
                <span class="sr-only">Instagram profil</span>
              </a>
            </div>
          </ul>
        </div>
      </div>
    </div>
  </nav>
</header>
